
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using Luban;
using System.Linq;


namespace cfg.test
{
    public partial class TbSingleton
    {
        private readonly System.Func<string, int, int, ByteBuf> _byteBufLoader;
        private readonly string _fileName;
        private Tables _tables;

        private readonly test.DemoSingletonType _data;
     
        public TbSingleton(ByteBuf _buf, string fileName, System.Func<string, int, int, ByteBuf> byteBufLoader)
        {
            int n = _buf.ReadSize();
            if (n != 1) throw new SerializationException("table mode=one, but size != 1");
            int offset = _buf.ReadInt();
            int length = _buf.ReadInt();
            ByteBuf dataBuf = byteBufLoader(fileName, offset, length);
            _data = test.DemoSingletonType.DeserializeDemoSingletonType(dataBuf);
        }


         public int Id => _data.Id;
         public string Name => _data.Name;
         public test.DemoDynamic Date => _data.Date;
    
        public void ResolveRef(Tables tables)
        {
            _data.ResolveRef(tables);
        }

        public override string ToString()
        {
            return _data.ToString();
        }
    }

}
